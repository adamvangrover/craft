{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ArgusAgentInteraction",
  "description": "Defines the request and response schema for the Argus Portfolio Monitoring Agent.",
  "type": "object",
  "properties": {
    "request": {
      "description": "The input packet required by the Argus agent.",
      "type": "object",
      "properties": {
        "portfolio_data": {
          "description": "An array of objects, where each object is a position or loan. Assumed to be cleaned by Sentinel.",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "exposure_usd": { "type": "number" },
              "industry": { "type": "string" },
              "country": { "type": "string" },
              "internal_risk_rating": { "type": "string" }
            },
            "required": ["id", "exposure_usd", "industry", "country", "internal_risk_rating"]
          }
        },
        "risk_appetite_framework": {
          "description": "A JSON object defining the firm's risk limits.",
          "type": "object",
          "properties": {
            "concentration_limits": { "type": "array" },
            "quality_limits": { "type": "array" },
            "ewi_definitions": { "type": "array" }
          }
        }
      },
      "required": ["portfolio_data", "risk_appetite_framework"]
    },
    "response": {
      "description": "The JSON output (Risk Appetite Dashboard) generated by the Argus agent.",
      "type": "object",
      "properties": {
        "dashboard_summary": {
          "type": "object",
          "properties": {
            "overall_status": { "type": "string", "enum": ["Green", "Amber", "Red"] },
            "summary_narrative": { "type": "string" },
            "timestamp_utc": { "type": "string", "format": "date-time" }
          },
          "required": ["overall_status", "summary_narrative", "timestamp_utc"]
        },
        "limit_monitoring": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "limit_name": { "type": "string" },
              "limit_type": { "type": "string" },
              "limit_value": { "type": "string" },
              "current_value": { "type": "string" },
              "status": { "type": "string", "enum": ["OK", "Warning", "BREACH"] }
            },
            "required": ["limit_name", "limit_type", "limit_value", "current_value", "status"]
          }
        },
        "risk_distribution": {
          "type": "object"
        },
        "early_warning_indicators": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "ewi_name": { "type": "string" },
              "ewi_description": { "type": "string" },
              "metric_value": { "type": "string" },
              "threshold": { "type": "string" }
            },
            "required": ["ewi_name", "ewi_description", "metric_value", "threshold"]
          }
        }
      },
      "required": ["dashboard_summary", "limit_monitoring", "risk_distribution", "early_warning_indicators"]
    }
  }
}
