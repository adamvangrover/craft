{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CassandraAgentInteraction",
  "description": "Defines the request and response schema for the Cassandra Regulatory Intelligence Agent.",
  "type": "object",
  "properties": {
    "request": {
      "description": "The input packet required by the Cassandra agent.",
      "type": "object",
      "properties": {
        "document_text": {
          "description": "The full, unstructured text of the regulatory document to be analyzed.",
          "type": "string"
        },
        "document_metadata": {
          "description": "An object containing key context about the document.",
          "type": "object",
          "properties": {
            "source_name": { "type": "string", "description": "e.g., 'Securities and Exchange Commission'" },
            "document_title": { "type": "string" },
            "publication_date": { "type": "string", "format": "date" },
            "document_type": { "type": "string", "enum": ["Final Rule", "Proposed Rule", "Discussion Paper", "Press Release", "Guidance", "Other"] }
          },
          "required": ["source_name", "document_title", "publication_date", "document_type"]
        }
      },
      "required": ["document_text", "document_metadata"]
    },
    "response": {
      "description": "The JSON output (Regulatory Impact Brief) generated by the Cassandra agent.",
      "type": "object",
      "properties": {
        "brief_summary": {
          "type": "object",
          "properties": {
            "document_title": { "type": "string" },
            "source_name": { "type": "string" },
            "urgency_level": { "type": "string", "enum": ["High", "Medium", "Low"] },
            "executive_summary": { "type": "string" }
          },
          "required": ["document_title", "source_name", "urgency_level", "executive_summary"]
        },
        "impact_analysis": {
          "type": "object",
          "properties": {
            "what_is_changing": {
              "description": "A bullet-point summary of the core regulatory changes.",
              "type": "array",
              "items": { "type": "string" }
            },
            "so_what_business_impact": {
              "description": "A bullet-point analysis of the potential consequences for the firm.",
              "type": "array",
              "items": { "type": "string" }
            },
            "now_what_recommendations": {
              "description": "A numbered list of clear, actionable next steps.",
              "type": "array",
              "items": { "type": "string" }
            }
          },
          "required": ["what_is_changing", "so_what_business_impact", "now_what_recommendations"]
        },
        "key_quotes": {
          "description": "An array of 2-3 direct, relevant quotes from the source document.",
          "type": "array",
          "items": { "type": "string" }
        }
      },
      "required": ["brief_summary", "impact_analysis", "key_quotes"]
    }
  }
}
