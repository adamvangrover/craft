/* === GLOBAL STYLES & RESETS === */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    line-height: 1.6;
    background-color: #f8f9fa;
    color: #343a40;
    padding: 20px;
    display: flex; /* Use flexbox for footer */
    flex-direction: column; /* Stack children vertically */
    min-height: 100vh; /* Ensure body takes at least full viewport height */
}

/* === PAGE LAYOUT (COMMON) === */
.page-container {
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
    flex-grow: 1; /* Allow page-container to grow and push footer down */
}
.page-header {
    display: flex; flex-wrap: wrap; align-items: center;
    margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #dee2e6;
}
.page-header h1 {
    font-size: 2em; /* Adjusted size */
    color: #2c3e50;
    margin-bottom: 0; /* Removed bottom margin as flex handles alignment */
    margin-right: auto; /* Pushes search bar to the right */
}
.page-header .repo-back-link {
    font-size: 0.9em;
    color: #007bff;
    text-decoration: none;
    margin-right: 20px; /* Space before title if needed */
}
.page-header .repo-back-link:hover {
    text-decoration: underline;
}


.page-footer {
    text-align: center;
    margin-top: 30px; /* Reduced margin */
    padding: 15px 0; /* Adjusted padding */
    border-top: 1px solid #dee2e6;
    font-size: 0.9em;
    color: #6c757d;
    width: 100%; /* Ensure footer spans width */
}

/* === MAIN INDEX PAGE (`primers/index.html`) STYLES FOR MARKDOWN VIEWER === */
#mainIndexSearch { /* ID from the active HTML */
    padding: 10px 12px;
    font-size: 0.95em;
    border: 1px solid #ced4da;
    border-radius: 6px;
    min-width: 250px; /* Minimum width for search bar */
    max-width: 400px; /* Max width */
}
#mainIndexSearch:focus {
    border-color: #80bdff; outline: 0; box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

.primers-navigator-container { /* Container for list and content */
    display: flex;
    gap: 20px;
    margin-top: 15px;
    /* Removed min-height to allow content to define height, body flex handles footer */
}

.primers-list-container { /* Left column for primer cards */
    flex: 0 0 300px; /* Fixed width for the list */
    background-color: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    padding: 10px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    overflow-y: auto;
    max-height: calc(100vh - 150px); /* Adjust based on actual header/footer/padding */
}

.primer-summary-card { /* Individual card in the list */
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    padding: 12px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s;
}
.primer-summary-card:hover {
    background-color: #e9ecef;
    border-color: #adb5bd;
}
.primer-summary-card.active-primer {
    background-color: #e7f3ff;
    border-left: 4px solid #007bff;
    padding-left: 8px;
}
.primer-summary-card.active-primer h3 {
    color: #0056b3;
}

.primer-summary-card h3 {
    font-size: 1.1em;
    color: #007bff;
    margin-bottom: 6px;
}
.primer-summary-card .primer-initial-summary p {
    font-size: 0.8em;
    color: #495057;
    margin-bottom: 8px;
    line-height: 1.4;
}
.primer-summary-card .primer-initial-summary p .key-term { font-size: 1em; }
.primer-summary-card .primer-initial-summary p em {
    font-style: italic; color: #6c757d; font-size: 0.9em; display: block; margin-top: 3px;
}
.primer-summary-card a.view-details-link { /* The link within the card */
    text-decoration: none;
    color: #007bff;
    font-weight: normal; /* Not bold to differentiate from h3 */
    font-size: 0.85em;
    display: block; /* Make it take its own line if desired */
    margin-top: 5px;
}
.primer-summary-card a.view-details-link:hover {
    text-decoration: underline;
    color: #0056b3;
}

#primer-content-display { /* Right column for Markdown content */
    flex: 1;
    background-color: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    padding: 20px 25px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    overflow-y: auto;
    max-height: calc(100vh - 150px); /* Match list height or adjust */
}

/* Basic Styling for Rendered Markdown in #primer-content-display */
#primer-content-display h1,
#primer-content-display h2,
#primer-content-display h3,
#primer-content-display h4,
#primer-content-display h5,
#primer-content-display h6 {
    color: #2c3e50; margin-top: 1.2em; margin-bottom: 0.6em; padding-bottom: 0.2em; border-bottom: 1px solid #e9ecef;
}
#primer-content-display h1:first-child,
#primer-content-display h2:first-child,
#primer-content-display h3:first-child { margin-top: 0; }
#primer-content-display h1 { font-size: 1.8em; }
#primer-content-display h2 { font-size: 1.5em; }
#primer-content-display h3 { font-size: 1.3em; }
#primer-content-display h4 { font-size: 1.1em; border-bottom: none; }
#primer-content-display p { margin-bottom: 1em; line-height: 1.7; }
#primer-content-display ul,
#primer-content-display ol { margin-left: 20px; margin-bottom: 1em; padding-left: 15px; }
#primer-content-display li { margin-bottom: 0.5em; }
#primer-content-display blockquote {
    border-left: 4px solid #bdc3c7; padding-left: 15px; margin-left: 0; margin-bottom: 1em;
    color: #555; font-style: italic; background-color: #f8f9fa;
}
#primer-content-display code {
    background-color: #e9ecef; padding: 0.2em 0.4em; border-radius: 3px;
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
    font-size: 0.9em; color: #c0392b;
}
#primer-content-display pre {
    background-color: #2c3e50; color: #f8f9fa; padding: 15px; border-radius: 4px;
    overflow-x: auto; margin-bottom: 1em;
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
    font-size: 0.85em; line-height: 1.5;
}
#primer-content-display pre code { background-color: transparent; color: inherit; padding: 0; border-radius: 0; font-size: inherit; }
#primer-content-display table {
    max-width: 100%; border-collapse: collapse; margin-bottom: 1.5em;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #dee2e6;
}
#primer-content-display th,
#primer-content-display td { border: 1px solid #dee2e6; padding: 10px 12px; text-align: left; }
#primer-content-display th { background-color: #f1f3f5; font-weight: 600; }
#primer-content-display img { max-width: 100%; height: auto; border-radius: 4px; margin: 0.5em 0; }
.key-term { /* Copied from old CSS, useful for .md content */
    font-weight: 600; color: #0056b3; background-color: #e7f3ff;
    padding: 1px 3px; border-radius: 3px; font-size: 0.95em;
}


/* === RESPONSIVE ADJUSTMENTS === */
@media (max-width: 768px) {
    body { padding: 10px; }
    .page-header { flex-direction: column; align-items: stretch; }
    .page-header h1 { text-align: center; margin-right: 0; font-size: 1.6em; margin-bottom:10px; }
    #mainIndexSearch { width:100%; max-width:100%; }

    .primers-navigator-container { flex-direction: column; min-height: auto; }
    .primers-list-container,
    #primer-content-display {
        flex: 1 1 auto; max-height: none;
    }
    .primers-list-container { max-height: 40vh; /* Scrollable list on mobile */ }

    #primer-content-display h1 { font-size: 1.5em; }
    #primer-content-display h2 { font-size: 1.3em; }
    #primer-content-display h3 { font-size: 1.15em; }
}

@media (max-width: 480px) {
    .page-header h1 { font-size: 1.4em; }
    #mainIndexSearch { font-size: 0.9em; }
    .primer-summary-card h3 { font-size: 1em; }
    #primer-content-display { padding: 15px 20px; }
    #primer-content-display h1 { font-size: 1.4em; }
    #primer-content-display h2 { font-size: 1.2em; }
    #primer-content-display h3 { font-size: 1.1em; }
}

/* === PRINT STYLES === */
@media print {
    body { font-size: 10pt; background-color: #fff !important; color: #000 !important; padding: 0; margin: 0.5in; }
    .page-header, .page-footer, #mainIndexSearch, .primers-list-container, .view-details-link { display: none !important; }
    .primers-navigator-container { display: block !important; }
    #primer-content-display {
        display: block !important; flex: none !important; width: 100% !important;
        max-height: none !important; overflow: visible !important;
        box-shadow: none !important; border: none !important; padding: 0 !important;
    }
    #primer-content-display h1, #primer-content-display h2, #primer-content-display h3,
    #primer-content-display h4, #primer-content-display h5, #primer-content-display h6 {
        color: #000 !important; border-bottom: 1px solid #ccc !important; page-break-after: avoid !important;
    }
    #primer-content-display h1 { font-size: 16pt; }
    #primer-content-display h2 { font-size: 14pt; }
    #primer-content-display h3 { font-size: 12pt; }
    #primer-content-display table { page-break-inside: avoid !important; }
    #primer-content-display blockquote, #primer-content-display pre { page-break-inside: avoid !important; }
    #primer-content-display code, #primer-content-display pre code {
        background-color: transparent !important; color: #000 !important;
        font-size: 9pt !important; border: none !important; padding: 0 !important;
    }
    #primer-content-display pre {
        background-color: #f0f0f0 !important; border: 1px solid #ccc !important;
        padding: 5pt !important; white-space: pre-wrap !important; word-wrap: break-word !important;
    }
    #primer-content-display a { color: #0000ee !important; text-decoration: underline !important; }
    #primer-content-display a[href^="#"] { display: none !important; }
}

/* === ACCESSIBILITY :focus-visible === */
:focus-visible { outline: 2px solid #007bff; outline-offset: 2px; box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25); }
#mainIndexSearch:focus-visible,
.primer-summary-card:focus-visible,
.primer-summary-card a.view-details-link:focus-visible {
    /* Handled by general :focus-visible or specific card focus */
}
.primer-summary-card:focus-visible {
    border-color: #007bff;
    box-shadow: 0 0 0 0.1rem rgba(0,123,255,.25);
}
